(this["webpackJsonpreact-seed"]=this["webpackJsonpreact-seed"]||[]).push([[0],{255:function(e,t,a){},286:function(e,t,a){},288:function(e,t,a){},307:function(e,t,a){},308:function(e,t,a){},343:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},353:function(e,t,a){e.exports=a.p+"static/media/beep1sec.b2ab2ed7.mp3"},418:function(e,t,a){e.exports=a(613)},424:function(e,t,a){},425:function(e,t,a){},429:function(e,t,a){},530:function(e,t){},612:function(e,t,a){},613:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(33),c=a.n(o);a(424),a(343),a(425);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(18),s=a(24),l=a(28),u=a(29),m=a(220),d=(a(286),a(14)),p=a(739),b=a(732),v=a(740),h=a(741),y=a(742),f=a(743),g=a(744),E=a(745),C=a(761),w=a(767),N=a(77),j=a(68),x=a(726),S=a(615),O=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.items;return r.a.createElement("div",{className:"button-wrapper whiteBackground"},r.a.createElement(x.a,{color:"primary","aria-label":"outlined primary button group"},e&&e.map((function(e,t){return r.a.createElement(S.a,{key:"button-".concat(e.label,"-").concat(t),variant:e.variant,color:e.style,type:"submit",className:e.className,onClick:e.onClick},e.label)}))))}}]),a}(n.Component),k=(a(429),a(729)),A=a(738),I=a(632),M=a(780),L=a(766),D=a(779),R=(a(288),a(733)),F=a(769),T=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChange=function(e){var t=e.target.value;n.setState({fieldValue:t,fieldName:e.target.name})},n.handleChange=function(e){var t=e.target.value;n.setState({fieldValue:t,fieldName:e.target.name}),n.props.updateAction({fieldValue:t,fieldName:e.target.name})},n.onSelectionChange=function(e){var t=e.target.value;n.setState({fieldValue:t,fieldName:e.target.name}),n.props.updateAction({fieldValue:t,fieldName:e.target.name})},n.onBlur=function(e){var t=n.state,a=t.fieldValue,r=t.fieldName;!!n.props.submitted||n.props.updateAction({fieldValue:a,fieldName:r})},n.onToggleChange=function(e){var t=e.target.value,a=e.target.name;t="boolean"===typeof t?t:"true"===t,n.setState({fieldValue:!t,fieldName:a}),n.props.updateAction({fieldValue:!t,fieldName:a})},n.onFilterValue=function(e){var t=n.props.items,a=e.target.value,r=e.target.name;n.setState({fieldValue:a,fieldName:r}),n.props.updateAction({fieldValue:a,fieldName:r,items:t})},n.selectInput=function(e,t,a,o,c,i,s,l,u,m,d,p){var b=!1,v="input-".concat(c,"-").concat(l);switch(("toggle"===e||"radioButton"==t&&"boolean"!==typeof o)&&(o="true"===o),"ratingStars"==t&&(o=1===o),m&&(o=""),t){case"filter":b=r.a.createElement(k.a,{className:"custom-input",key:v,name:s,label:i,value:o,type:e,onChange:n.onFilterValue,disabled:u});break;case"area":b=r.a.createElement(k.a,{key:v,className:"custom-input area-text",name:s,multiline:!0,rows:4,as:"textarea",label:c,type:e,value:o,onBlur:n.onBlur,onChange:n.onChange,disabled:u});break;case"radioButton":b=r.a.createElement("div",{className:"center",style:{width:"100%"}},r.a.createElement("div",{className:"radioButtonLabel"},c),r.a.createElement(D.a,{"aria-label":s,name:s,value:n.state.fieldValue,onChange:n.handleChange},a.map((function(e,t){return r.a.createElement(R.a,{className:"PrivateSwitchBase-root-1",key:t,value:e.value,control:r.a.createElement(L.a,null),label:e.name})}))));break;case"ratingStars":b=r.a.createElement("div",{className:"center",style:{width:"100%"}},r.a.createElement("div",{className:"ratingStarsLabel"},c),r.a.createElement(F.a,{style:{fontSize:"2rem"},name:s,defaultValue:2,max:d,value:n.state.fieldValue,onChange:n.handleChange}));break;case"toggle":return b=r.a.createElement(A.a,{size:"medium",checked:o,name:s,value:o,label:i,onChange:n.onToggleChange,disabled:u});case"select":b=r.a.createElement(I.a,{name:s,key:v,as:"select",className:"custom-input custom-select mr-sm-2",id:"inlineFormCustomSelect",value:o,onBlur:n.onBlur,onChange:n.onChange,ref:n.changeInput,disabled:u},a.map((function(e,t){return r.a.createElement(M.a,{key:"option-".concat(t),value:e.value,id:"option-".concat(t)},e.label)})));break;case"file":b=r.a.createElement("div",{className:"file-container"},r.a.createElement("label",{htmlFor:"contained-button-file"},r.a.createElement(S.a,{className:"button-file",variant:"contained",color:"primary",component:"span"},i)),r.a.createElement("input",{className:"custom-file",id:"contained-button-file",name:s,value:o,multiple:!0,type:"file",onBlur:n.onBlur,onChange:n.onChange}));case"multiple":break;default:b=r.a.createElement(k.a,{className:"custom-input",key:v,name:s,label:i,value:o,type:e,onBlur:n.onBlur,onChange:n.onChange,disabled:u})}return b},n.changeInput=r.a.createRef(),n.state={fieldValue:e.value||"",fieldName:e.name||"",submitted:!1},n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(e){e.fieldValue&&this.setState({fieldValue:e.fieldValue,fieldName:e.fieldName})}},{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.label,n=e.type,o=e.typeForm,c=e.options,i=e.key,s=e.name,l=e.disable,u=e.className,m=e.submitted,d=e.stars,p=e.cancel,b=a?a.replace(/\s/g,"").toLowerCase():"",v=this.state.fieldValue;return r.a.createElement("div",{key:b,className:"form-custom-group ".concat(u)},r.a.createElement("label",{className:"label-name"},r.a.createElement("span",{className:"content-name"},a)),this.selectInput(n,o,c,v,a,t,s,i,l,m,d,p))}}]),a}(n.Component),W=Object(d.b)((function(e){return{updateFields:function(t){return e({type:"@form/validateFileds",value:t})}}}))(T),P=a(139),z=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).setOrder=function(e,t,a){var r=n.state.ordered,o=n.props.orderTable;r[e]=!r[e],n.setState({ordered:r}),o({column:e,items:t,sense:a})},n.setOpen=function(e){var t=n.state.open,a=n.props,r=a.items,o=a.subObject,c=r[e];t[e]?t[e]=!1:t[e]=c[o],n.setState({open:t})},n.state={open:[],ordered:[]},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.headers,c=t.className,i=t.onSelectRow,s=t.buttons,l=t.subObject,u=t.subLabel,m=t.childObject,d=t.childLabel,x=t.orderTable,S=t.filterTable,k=t.totalItems,A=t.paginator,I=this.state,M=I.open,L=I.ordered;return r.a.createElement("div",{className:"custom-table_wrapper"},r.a.createElement(p.a,{className:"custom-table_container",component:b.a},S&&r.a.createElement(W,{id:"search-001",type:"text",typeForm:"filter",placeholder:"Filtrar",updateAction:S,name:"filter",items:k}),r.a.createElement(v.a,{className:c,striped:"true",bordered:"true",hover:"true",responsive:"true"},r.a.createElement(h.a,{className:"custom-table_head"},r.a.createElement(y.a,{className:"custom-table_header"},o&&o.map((function(t,a){return r.a.createElement(f.a,{key:a},x&&r.a.createElement(r.a.Fragment,null,L[t.column]?r.a.createElement(N.a,{onClick:function(){return e.setOrder(t.column,n,-1)},className:"table-icon",icon:j.c}):r.a.createElement(N.a,{onClick:function(){return e.setOrder(t.column,n,1)},className:"table-icon",icon:j.b})),r.a.createElement("span",{className:"header-title"},t.label))})))),r.a.createElement(g.a,null,n&&n.map((function(t,n){return r.a.createElement(r.a.Fragment,{key:"frag-".concat(n)},r.a.createElement(y.a,{className:"custom-table_rows",key:n},l&&r.a.createElement(f.a,{onClick:function(){return e.setOpen(n)}},M[n]?r.a.createElement(N.a,{className:"table-icon",icon:j.e}):r.a.createElement(N.a,{className:"table-icon",icon:j.d})),t&&Object.keys(t).map((function(e){var a=r.a.createElement(f.a,{onClick:function(){return!!i&&i(t)},key:e},t[e]);return!0===t[e]?a=r.a.createElement(f.a,{onClick:function(){return!!i&&i(t)},key:e},r.a.createElement(N.a,{className:"table-icon",icon:j.i})):!1===t[e]?a=r.a.createElement(f.a,{onClick:function(){return!!i&&i(t)},key:e},r.a.createElement(N.a,{className:"table-icon",icon:j.h})):t[e]&&"object"===typeof t[e]&&(a=""),a}))),l&&r.a.createElement(y.a,null,r.a.createElement(f.a,{style:{paddingBottom:0,paddingTop:0},colSpan:6},r.a.createElement(E.a,{in:M[n],timeout:"auto",unmountOnExit:!0},M[n]&&M[n].length?r.a.createElement(C.a,{className:"custom-table_subtable"},r.a.createElement("h3",{className:"sub-object_title"},r.a.createElement(P.a,{to:"/".concat(l),className:"table-link-title "},u)),r.a.createElement(a,{onSelectRow:!1,className:"sub-object-".concat(l),items:M[n],buttons:[],subObject:m,subLabel:d})):""))))}))))),A?r.a.createElement(w.a,{rowsPerPageOptions:[5,10,25],component:"div",count:3,rowsPerPage:2,page:1}):"",r.a.createElement(O,{items:s}))}}]),a}(n.Component),B=a(218),q=function(e){return e.users},_=(Object(B.a)({users:q}),a(746)),U=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"componentWillMount",value:function(){(0,this.props.getUsers)()}},{key:"render",value:function(){var e=this.props,t=e.userHeaders,a=e.users;return r.a.createElement("div",{className:"App home-container"},r.a.createElement("div",{className:"user-list_wrapper"},a&&!a.empty?r.a.createElement(z,{className:"users-table",items:a,headers:t,onSelectRow:!1}):r.a.createElement(_.a,{className:"spinner-wrapper",animation:"border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))}}]),a}(n.Component),H=Object(d.b)((function(e){return{userHeaders:e.userHeaders,users:q(e)}}),(function(e){return{getUsers:function(){return e({type:"@users/getAll",value:1})}}}))(U),V=a(21),Z={users:[{id:"1001",email:"email@email.com",name:"Alex",last_name:"vera"},{id:"1002",email:"joe@email.com",name:"Joe",last_name:"Doe"},{id:"1003",email:"jane@email.com",name:"Jane",last_name:"Smith"}],userHeaders:[{label:"id",column:"id"},{label:"email",column:"email"},{label:"first name",column:"first_name"},{label:"last name",column:"last_name"},{label:" ",column:" "}]},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=Object(V.a)({},e),n=t.payload,r=t.type;switch(r){case"@users/getUsersSuccess":var o=n.data;return a.users=o,Object(V.a)({},a);default:return Object(V.a)({},a)}},J=a(37),Q=a(219),K=a(100),Y=a(15),X=a.n(Y),$=a(32);function ee(e){return{type:"@users/getUsersError",payload:e}}var te=a(228),ae=a.n(te),ne=(a(441),a(444),a(614),ae.a.initializeApp({apiKey:"AIzaSyCNJMf10OJF68jDCEFvDmNi9LmWtQX613k",authDomain:"chat-asesores-prueba.firebaseapp.com",databaseURL:"https://chat-asesores-prueba.firebaseio.com",projectId:"chat-asesores-prueba",storageBucket:"chat-asesores-prueba.appspot.com",messagingSenderId:"12057999049",appId:"1:12057999049:web:ebd52cedd467066f1aff18",measurementId:"G-QV5QCTB9L5"})),re=ne.firestore(),oe=ae.a.firestore.FieldValue,ce=ne.auth(),ie=ae.a.storage(),se=X.a.mark(ue),le=X.a.mark(me);function ue(){var e,t,a,n,r;return X.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return e="".concat(_n).concat(qn),o.next=3,Object($.a)(fetch,e,{method:"GET"});case 3:return t=o.sent,o.next=6,re.collection("users").get();case 6:if(a=o.sent,n={data:[]},a&&a.forEach((function(e){var t=e.data(),a=t.id,r=t.email,o=t.name,c=t.last_name;n.data.push({id:a,email:r,name:o,last_name:c})})),!(n.data.length>0)){o.next=14;break}return o.next=13,Object($.b)({type:"@users/getUsersSuccess",payload:n});case 13:return o.abrupt("return");case 14:return o.next=16,Object($.a)([t,t.json]);case 16:return r=o.sent,o.next=19,Object($.b)(ee(r));case 19:case"end":return o.stop()}}),se)}function me(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.f)("@users/getAll",ue);case 2:case"end":return e.stop()}}),le)}var de=a(773),pe=a(34),be=r.a.createContext(),ve=function(e){var t=e.children,a=Object(n.useState)(null),o=Object(pe.a)(a,2),c=o[0],i=o[1];return Object(n.useEffect)((function(){ce.onAuthStateChanged(i)}),[]),r.a.createElement(be.Provider,{value:{currentUser:c}},t)},he=function(e,t){sessionStorage.setItem(e,t)},ye=function(e){return JSON.parse(sessionStorage.getItem(e))},fe=function(e){sessionStorage.removeItem(e)},ge=a(53),Ee=Object(J.combineReducers)({form:de.a,reducer:G}),Ce=Object(J.createStore)(Ee),we=Object(K.a)(),Ne=Object(J.createStore)(G,Object(Q.composeWithDevTools)(Object(J.applyMiddleware)(we)));we.run(me);var je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=ye("currentUser");return r.a.createElement(ve,null,r.a.createElement(d.a,{store:Ce},r.a.createElement(d.a,{store:Ne},r.a.createElement(m.a,{className:"main-wrapper home"},r.a.createElement("h1",null," Lista de Usuarios "),e?r.a.createElement(H,null):r.a.createElement(ge.a,{to:"/auth"})))))}}]),a}(n.Component),xe=(a(307),a(93)),Se=a(774),Oe=a(266),ke=(a(308),a(161)),Ae=a(770),Ie=a(747),Me=a(763),Le=a(771),De=a(619),Re=a(634),Fe=a(620),Te=a(781),We=a(352),Pe=a.n(We),ze=a(102),Be=a.n(ze),qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderTextField=function(e){var t=e.label,a=e.input,n=(e.placeholder,e.meta),o=n.touched,c=n.invalid,i=n.error,s=Object(ke.a)(e,["label","input","placeholder","meta"]);return r.a.createElement(k.a,Object.assign({label:t,error:o&&c,helperText:o&&i},a,s))},e.renderCheckbox=function(e){var t=e.input,a=(e.label,e.placeholder);return r.a.createElement("div",null,r.a.createElement(R.a,{control:r.a.createElement(Le.a,{checked:!!t.value,onChange:t.onChange}),label:Be()(a)}))},e.radioButton=function(e){var t=e.input,a=(e.children,Object(ke.a)(e,["input","children"])),n=a.options,o=a.key;return r.a.createElement(De.a,{key:"fcr-".concat(o)},r.a.createElement(D.a,Object.assign({key:"rg-".concat(o)},t,a),n.map((function(e,t){return r.a.createElement(R.a,{key:"ri-".concat(t),value:e.value,control:r.a.createElement(L.a,null),label:e.label})}))))},e.renderFromHelper=function(e){var t=e.touched,a=e.error;return t&&a?r.a.createElement(Fe.a,null,t&&a):void 0},e.renderSwitchButton=function(e){var t=e.input,a=(e.label,e.meta),n=a.touched,o=(a.error,a.invalid);e.children,Object(ke.a)(e,["input","label","meta","children"]);return r.a.createElement(A.a,Object.assign({cancel:"medium",error:n&&o},t))},e.renderSelectField=function(t){var a=t.input,n=t.label,o=t.meta,c=o.touched,i=o.error,s=(t.children,Object(ke.a)(t,["input","label","meta","children"]));return r.a.createElement(De.a,{error:c&&!!i},r.a.createElement(Re.a,{htmlFor:"".concat(a.name,"-native-simple")},n),r.a.createElement(I.a,Object.assign({native:!0},a,s,{inputProps:{name:a.name,id:"".concat(a.name,"-native-simple")}}),r.a.createElement("option",{key:"option-".concat(a.name),value:""}),s.options.map((function(e,t){return r.a.createElement("option",{key:"s-option-".concat(t),value:e.value},e.label)}))),e.renderFromHelper({touched:c,error:i}))},e.renderSpacer=function(e){return r.a.createElement("div",{className:"custom-input spacer",key:e})},e.renderChidlren=function(e){var t=e.fields,n=e.meta,o=n.touched,c=n.error,i=Object(ke.a)(e,["fields","meta"]);return r.a.createElement("ul",{className:"form-child"},i.label&&r.a.createElement("h3",null,i.label),t&&t.length>0&&t.map((function(e,n){return r.a.createElement("li",{key:n},r.a.createElement("h4",null,i.fieldtitle," #",n+1),r.a.createElement(a,{submitable:!1,items:i.subitems,className:"field-child",member:e,dynamicOptions:i.dynamicOptions}),r.a.createElement("div",{className:"button-wrapper delete"},r.a.createElement(x.a,{color:"primary","aria-label":"primary button group"},r.a.createElement(S.a,{color:"secondary",type:"button",className:"delete",title:i.removeLabel,onClick:function(){return t.remove(n)}},i.removeLabel))))})),r.a.createElement("li",null,r.a.createElement("div",{className:"button-wrapper add"},r.a.createElement(x.a,{color:"primary","aria-label":"primary button group"},r.a.createElement(S.a,{color:"primary",type:"button",className:"add",title:i.addLabel,onClick:function(){return t.push({})}},i.addLabel))),o&&c&&r.a.createElement("span",null,c)))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.member,c=t.sectionTitle,i=(t.changeInputFile,t.validations),s=t.dynamicOptions;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"field-container"},c&&r.a.createElement("h3",null,c),n.map((function(t,n){var c={};t.options=s&&s[t.name]?s[t.name]:t.options;var l=o?"".concat(o,".").concat(t.name):t.name;switch(t.typeForm){case"text":c=e.renderTextField;break;case"radio":c=e.radioButton;break;case"checkbox":c=e.renderCheckbox;break;case"select":c=e.renderSelectField;break;case"switch":c=e.renderSwitchButton;break;case"spacer":c=e.renderSpacer;break;case"array":c=e.renderChidlren;break;case"stars":c=e.renderStarsButton;break;default:c=e.renderTextField}return r.a.createElement("div",{className:"material-field ".concat(t.hidden?"no-visible":""," ").concat(t.className),key:n},"array"===t.typeForm?r.a.createElement(Ae.a,{addLabel:t.addLabel,removeLabel:t.removeLabel,subitems:t.fields,name:t.name,label:t.label,fieldtitle:t.fieldtitle,component:c,dynamicOptions:s}):"section"===t.typeForm?r.a.createElement("div",{className:"section-container"},r.a.createElement(Ie.a,{name:t.name},r.a.createElement(a,{sectionTitle:t.label,submitable:!1,items:t.fields,className:"field-child",member:o,dynamicOptions:s,validations:i}))):r.a.createElement(r.a.Fragment,null,t.tooltip&&r.a.createElement(Te.a,{className:"form-tooltip",title:t.tooltip,"aria-label":"add"},r.a.createElement(Pe.a,null)),t.label&&r.a.createElement("label",{className:"label-name"},r.a.createElement("span",{className:"content-name"},Be()(t.label))),r.a.createElement(Me.a,{name:l,component:c,label:"date"===t.type?"":t.label,placeholder:t.placeholder,options:t.options,multiline:t.multiline,rows:t.rows,key:"field-".concat(n),subitems:t.fields,type:t.type,disabled:t.disabled,className:"date"===t.type?"datepicker":""},"select"===t.typeForm&&r.a.createElement("option",{key:"option-".concat(n),value:""}),t.options&&t.options.map((function(e,a){return"radio"===t.typeForm?r.a.createElement(L.a,{key:"radio-".concat(a),value:e.value,label:e.label},e.label):"select"===t.typeForm?r.a.createElement("option",{key:"s-option-".concat(a),value:e.value},e.label):void 0})))))}))))}}]),a}(n.Component),_e=a(759),Ue=a(265),He=a.n(Ue),Ve=a(180),Ze=a.n(Ve),Ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.formTitle,n=e.className,o=e.formName,c=e.buttons,i=e.handleSubmit,s=e.card,l=e.formSubTitle,u=e.submitable,m=e.validations,d=e.invalid,p=e.pristine,b=e.reset,v=e.submitting,h=e.dynamicOptions,y=e.customHeader;return s?r.a.createElement(Se.a,{key:"card-".concat(o),className:"card-".concat(n)},r.a.createElement(Se.a.Header,null,y?r.a.createElement(Oe.a,{className:"imga-title",src:y}):a,r.a.createElement("p",null,Be()(l))),r.a.createElement(Se.a.Body,null,r.a.createElement("form",{tabIndex:0,className:"form_container ".concat(n),onSubmit:i},r.a.createElement(He.a,{handleKeys:["enter"],onKeyEvent:i},r.a.createElement(qe,{submitable:u,items:t,validations:m,formName:o,className:n,handleSubmit:i,buttons:c,dynamicOptions:h})),c?r.a.createElement("div",{className:"button-wrapper"},r.a.createElement(x.a,{color:"primary","aria-label":"primary button group"},c.map((function(e,t){return r.a.createElement(S.a,{key:"button-".concat(e.label),variant:e.variant,color:e.style,type:"".concat(u?"submit":"button"),className:e.className,onClick:e.primary?i:e.onClick,disabled:!(!m||!e.primary)&&d},e.label)})))):r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:p||v},"Submit"),r.a.createElement("button",{type:"button",disabled:p||v,onClick:b},"Clear Values"))))):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"form_wrapper"},y?r.a.createElement("div",{className:"form-title"},r.a.createElement(Oe.a,{className:"image-title",src:y}),r.a.createElement(Ze.a,{className:"icon-title"})):r.a.createElement("h2",{className:"form-title"},a,r.a.createElement(Ze.a,{className:"icon-title"})),r.a.createElement("p",{className:"form-sub-title"},Be()(l)),r.a.createElement("form",{tabIndex:0,className:"form_container ".concat(n),onSubmit:i},r.a.createElement(He.a,{handleKeys:["enter"],onKeyEvent:i},r.a.createElement(qe,{submitable:u,items:t,validations:m,formName:o,className:n,handleSubmit:i,buttons:c,dynamicOptions:h})),c?r.a.createElement("div",{className:"button-wrapper"},r.a.createElement(x.a,{color:"primary","aria-label":"primary button group"},c.map((function(e,t){return r.a.createElement(S.a,{key:"button-".concat(e.label),variant:e.variant,color:e.style,type:"".concat(u?"submit":"button"),className:e.className,onClick:e.primary?i:e.onClick,disabled:!(!m||!e.primary)&&d},e.label)})))):r.a.createElement("div",null,r.a.createElement("button",{type:"submit",disabled:p||v},"Submit"),r.a.createElement("button",{type:"button",disabled:p||v,onClick:b},"Clear Values")))))}}]),a}(n.Component),Je=Object(J.compose)(Object(d.b)((function(e,t){return{form:t.formName,validate:t.validations}})),Object(_e.a)({}))(Ge),Qe=a(353),Ke=a.n(Qe),Ye=(a(336),a(762)),Xe=a(62),$e=a.n(Xe),et=a(354),tt=a(127),at=a(360),nt=a.n(at),rt=a(778),ot=function(e){return e.localReducer.responseMessage},ct=function(e){return e.localReducer.idConversation},it=function(e){return Object(rt.a)("chatReduxForm")(e)},st=function(e){return e.localReducer.selectedCompanyForm},lt=function(e){return e.localReducer.esperandoConv},ut=function(e){return e.localReducer.dataConversation},mt=function(e){return e.localReducer.flagNewChat},dt=function(e){return e.localReducer.company},pt=function(e){return e.localReducer.company_id},bt=function(e){return e.localReducer.horario},vt=function(e){return e.localReducer.playSound},ht=function(e){return e.localReducer.infoEncuesta},yt=function(e){return e.localReducer.infoFormClient},ft=function(e){return e.localReducer.enableFormClient},gt=function(e){return e.localReducer.typeWriterWeb},Et=function(e){return e.localReducer.uploading},Ct=function(e){return e.localReducer.startWidget},wt=function(e){return e.localReducer.creandoConversacion},Nt=function(e){return e.localReducer.isEnabledCaptchaValidation},jt=function(e){return e.localReducer.sendingFlow},xt=function(e){return e.localReducer.iniciaChatAbierto},St=function(e){return e.localReducer.chatOpened},Ot=(Object(B.a)({responseMessage:ot,idConversation:ct}),"@chatbot/sendResponse"),kt="@chatbot/listenerResponse",At="@chatbot/startConversation",It="@chatbot/enviarEncuesta",Mt="@chatbot/obtenerInfoConfEncuesta",Lt="@chatbot/mostrarWidget",Dt="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgMzU3IDM1NyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzU3IDM1NzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPgo8Zz4KCTxnIGlkPSJjbGVhciI+CgkJPHBvbHlnb24gcG9pbnRzPSIzNTcsMzUuNyAzMjEuMywwIDE3OC41LDE0Mi44IDM1LjcsMCAwLDM1LjcgMTQyLjgsMTc4LjUgMCwzMjEuMyAzNS43LDM1NyAxNzguNSwyMTQuMiAzMjEuMywzNTcgMzU3LDMyMS4zICAgICAyMTQuMiwxNzguNSAgICIgZmlsbD0iI0ZGRkZGRiIvPgoJPC9nPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=",Rt="@chatbot/sendingMessageDialogFlow",Ft="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0id2luZG93cy0xMjUyIj8+DQo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MzUuNSA1MzUuNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTM1LjUgNTM1LjU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnIGlkPSJzZW5kIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIwLDQ5Ny4yNSA1MzUuNSwyNjcuNzUgMCwzOC4yNSAwLDIxNi43NSAzODIuNSwyNjcuNzUgMCwzMTguNzUgICAiIGZpbGw9InJnYmEoMCwgMCwgMCwgMC41NCkiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4=",Tt="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0id2luZG93cy0xMjUyIj8+DQo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+DQo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPg0KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIGlkPSJDYXBhXzEiIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iNTEycHgiIGhlaWdodD0iNTEycHgiIHZpZXdCb3g9IjAgMCA1MzUuNSA1MzUuNSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTM1LjUgNTM1LjU7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnPg0KCTxnIGlkPSJzZW5kIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIwLDQ5Ny4yNSA1MzUuNSwyNjcuNzUgMCwzOC4yNSAwLDIxNi43NSAzODIuNSwyNjcuNzUgMCwzMTguNzUgICAiIGZpbGw9InJnYmEoMjE1LDM0LDM0LDAuNzY4NjI3NDUwOTgwMzkyMikiLz4NCgk8L2c+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8L3N2Zz4=",Wt=function(e){return[{label:"Enviar",className:"auth-btn-send",action:!1,style:"primary",onClick:e}]},Pt=a(51),zt=(a(337),a(355)),Bt=a(760),qt=a(748),_t={fieldName:!1,fieldValue:!1,submitted:!1},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_t,t=arguments.length>1?arguments[1]:void 0,a=Object(V.a)({},e),n=(t.payload,t.type);t.value;switch(n){case"@form/validateFileds":default:return Object(V.a)({},a)}},Ht=X.a.mark(Zt),Vt=X.a.mark(Gt);function Zt(e){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),Ht)}function Gt(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.f)("@form/validateFileds",Zt);case 2:case"end":return e.stop()}}),Vt)}var Jt=Object(K.a)(),Qt=Object(J.createStore)(Ut,Object(J.applyMiddleware)(Jt));Jt.run(Gt);var Kt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleButtonClick=function(){e.form.reset()},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.formName,n=e.dataObject,o=e.updateAction,c=e.className,i=e.submitted;return r.a.createElement(Bt.a,{id:"form-".concat(a),className:c,key:"form-".concat(a),name:a},n&&t&&t.map((function(e,t){return r.a.createElement(qt.a,{key:t,className:"form-custom-wrapper"},r.a.createElement(d.a,{store:Qt},r.a.createElement(W,{id:t,label:e.label,hint:e.hint,type:e.type,typeForm:e.typeForm,value:n[e.name],options:e.options,disable:e.disable,placeholder:e.placeholder,updateAction:o,name:e.name,submitted:i,className:e.className,stars:e.stars,cancel:e.cancel})))})))}}]),a}(r.a.Component),Yt=Object(_e.a)({form:"syncValidation"})(Kt),Xt=a(749),$t=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.items,a=e.formTitle,n=e.formSubtitle,o=e.className,c=e.formName,i=e.values,s=e.buttons,l=e.updateAction,u=e.card,m=e.submitted;e.loading,Xt.a;return u?r.a.createElement(Se.a,{key:"card-".concat(c),className:"card-".concat(o)},r.a.createElement(Se.a.Header,null,a),r.a.createElement(Se.a.Body,null,r.a.createElement("p",{className:"font-bold"},n),r.a.createElement(Yt,{submitted:m,items:t,formName:c,dataObject:i,updateAction:l}),r.a.createElement(O,{items:s}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",{className:"form-title"},a),r.a.createElement("p",{className:"font-bold subtitleStyle"},n),r.a.createElement(Yt,{submitted:m,key:c,className:"form-".concat(o),items:t,formName:c,dataObject:i,updateAction:l}),r.a.createElement(O,{items:s}))}}]),a}(n.Component),ea=a(622),ta=a(755),aa=a(756),na=a(225),ra=a(226),oa=a(750),ca=a(772),ia=a(757),sa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={displayedText:"",done:!1},r.index=0,r.interval=null,r.finalRef=Object(n.createRef)(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.richtext,n=t.speed,r=void 0===n?30:n;this.interval=setInterval((function(){e.index<a.length?(e.setState((function(t){return{displayedText:t.displayedText+a.charAt(e.index)}}),(function(){e.finalRef.current&&e.finalRef.current.scrollIntoView({behavior:"smooth"})})),e.index++):(clearInterval(e.interval),e.setState({done:!0}))}),r)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.state,t=e.displayedText,a=e.done;return r.a.createElement("div",{className:"typewriter-text-div"},a?r.a.createElement(na.a,{remarkPlugins:[ra.a],linkTarget:"_blank",children:t,className:"typewriter-text"}):r.a.createElement("pre",null,t,r.a.createElement("span",{ref:this.finalRef})))}}]),a}(r.a.Component),la=new Set;var ua=function(e){var t=e.company,a=e.idConversartion,o=e.startConversation,c=e.handleNewUserMessage,i=Object(n.useRef)(null),s="chat-message-label";return Object(n.useEffect)((function(){if("undefined"!==typeof document){if(i.current&&!i.current.querySelector("#".concat(s))){var e=document.createElement("label");e.id=s,e.className="sr-only",e.textContent="Escribe tu mensaje en el chat",i.current.insertBefore(e,i.current.firstChild)}var t=function(){var e=document.querySelector(".rcw-new-message");e&&(e.setAttribute("aria-labelledby",s),e.setAttribute("title","Campo de texto para escribir un mensaje en el chat"),e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"));var t=document.querySelector(".rcw-send");t&&(t.setAttribute("aria-label","Enviar mensaje"),t.setAttribute("title","Enviar mensaje"));var a=document.querySelector(".chat-image-header");a&&(a.setAttribute("alt","Logo cliente asistente virtual"),a.setAttribute("title","Logo cliente asistente virtual"));var n=document.querySelector(".rcw-avatar");n&&(n.setAttribute("alt","Avatar del asistente virtual"),n.setAttribute("title","Avatar del asistente virtual"));var r=document.querySelector(".rcw-send-icon");r&&(r.setAttribute("alt",""),r.removeAttribute("title"));var o=document.querySelector(".rcw-open-launcher");if(o&&(o.setAttribute("aria-label","Abrir chat - asistente virtual"),o.setAttribute("title","Abrir chat - asistente virtual"),o.setAttribute("role","button"),o.setAttribute("tabindex","0"),!o.__accessibleKeyHandlerInstalled)){o.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),o.click())})),o.__accessibleKeyHandlerInstalled=!0}};t();var a=new MutationObserver((function(){return t()}));return a.observe(document.body,{childList:!0,subtree:!0}),function(){return a.disconnect()}}}),[]),r.a.createElement("div",{ref:i,className:"chat-widget-wrapper"},r.a.createElement("style",null,"\n        .sr-only {\n          position: absolute !important;\n          width: 1px !important;\n          height: 1px !important;\n          padding: 0 !important;\n          margin: -1px !important;\n          overflow: hidden !important;\n          clip: rect(0, 0, 0, 0) !important;\n          white-space: nowrap !important;\n          border: 0 !important;\n        }\n      "),r.a.createElement(Pt.Widget,{title:t.nombre,subtitle:"",className:"chat-widget-container",senderPlaceHolder:"\xbfEn qu\xe9 te puedo ayudar?",handleNewUserMessage:a?c:o,profileAvatar:t.avatar,titleAvatar:t.logoNombre,toggleInputDisabled:!1,toggleWidget:!0}))},ma=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={mostrarTypewriter:!1},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.nuevoMsge,t=function(e){if(e.messageId)return String(e.messageId);var t=(e.text||"").slice(0,200);return"".concat(e.from||"unknown","|").concat(t)}(this.props);this._messageKey=t,e&&!la.has(t)&&(la.add(t),this.setState({mostrarTypewriter:!0}))}},{key:"componentDidUpdate",value:function(){console.log("actualizando")}},{key:"render",value:function(){var e=this.props,t=e.text,a=(e.from,e.typeWriterWeb),n=(e.nuevoMsge,this.state.mostrarTypewriter),o=t?t.replaceAll(/\*/gi,"**").replaceAll(/\n+/gi,"\n\n"):"";return r.a.createElement("div",{className:"richtext-message typewriter-container"},a&&n?r.a.createElement(sa,{richtext:o,speed:20}):r.a.createElement(na.a,{remarkPlugins:[ra.a],linkTarget:"_blank",children:o}))}}]),a}(n.Component),da=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.text,n=e.type,o=e.className,c=e.spinnerClassName,i=e.textClassName,s=e.color;return r.a.createElement("div",{className:"modal-container-".concat(o)},r.a.createElement("div",{id:t,className:o},"linear"===n?r.a.createElement(oa.a,{className:c,color:s}):r.a.createElement(Xt.a,{className:c,color:s}),a&&r.a.createElement("p",{className:i}," ",a," ")))}}]),a}(n.Component),pa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.subtitle,a=e.logo,n=e.reloadText,o=e.placeholder,c=e.renderThis,i=e.svgIconX;return r.a.createElement("div",{className:"captcha-container"},r.a.createElement("div",{className:"form-title"},r.a.createElement(Oe.a,{style:{maxWidth:"51%"},className:"image-title",src:a}),r.a.createElement(Ze.a,{className:"icon-title"})),r.a.createElement("p",{className:"form-sub-title"},t),r.a.createElement("div",{className:"captchaForm"},r.a.createElement("div",{className:"flex align-items-center justify-content-center "},r.a.createElement(tt.a,{reloadText:n})),r.a.createElement("div",{className:"flex align-items-center justify-content-center mt-2"},r.a.createElement(ia.a,{sx:{width:"13rem"},id:"outlined-basic",label:o,variant:"outlined",value:c.state.valueCaptcha,onInput:function(e){return c.setState({valueCaptcha:e.target.value})}})),!!c.state.errorCaptchaInvalido&&r.a.createElement("div",{className:"flex align-items-center justify-content-center"},r.a.createElement("p",{style:{color:"red",paddingTop:"0px"},className:"form-sub-title"},"Caracteres incorrectos, intente de nuevo.")),r.a.createElement("div",{className:"flex align-items-center justify-content-center mt-3"},r.a.createElement(ca.a,{color:"secondary",variant:"contained",onClick:function(){return c.doSubmit(c.state.valueCaptcha)}},"Enviar"))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fake-field"}),r.a.createElement("div",{className:"fake-button close"},r.a.createElement("button",{className:"rcw-close-button rcw-fake-close-button"},r.a.createElement("img",{src:i,className:"rcw-close",alt:"close"})))))}}]),a}(n.Component),ba=a(765),va=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).startRecording=function(){n.setState({record:!0});var e=document.querySelector(".sound-wave");e.style.display="block";var t=document.querySelector(".rcw-send"),a=document.querySelector(".attach-widget-send-audio");t&&(t.style.display="none"),a&&(a.style.display="block"),e.setAttribute("title","...Grabando Audio")},n.stopRecording=function(){n.setState({record:!1})},n.lauchChatWidget=function(){var e=n.props.cambiarEstadoChatAbiertoTrue;setTimeout((function(){var t=$e()(".chat-closed .rcw-launcher"),a=$e()(".rcw-widget-container .rcw-launcher"),n=$e()("body");a?(a.click(),n.addClass("chat-opened")):t&&t.click(),e()}),2500)},n.validations=function(e){var t={};console.log(e);return["mail","terminos","nombre","subject","related"].forEach((function(a){e[a]||(t[a]="Este campo es obligatorio")})),e.mail&&!/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.mail)&&(t.mail="El correo ingresado no es inv\xe1lido"),t},n.onUnload=function(e){e.preventDefault();Object($.a)(fetch,"https://us-central1-chat-asesores-3.cloudfunctions.net/nuevaConversacionWeb",{method:"POST",headers:{accept:"application/json, text/plain, */*","content-type":"application/json","Cache-Control":"no-cache","cache-control":"no-cache"},body:JSON.stringify({company:"1020",nombre:"cerrada",mail:"cerrada",motivo:"cerrada"})})},n.doSubmit=function(e){var t=n.props.startConversation;!0===Object(tt.c)(e)?(Object(tt.b)(6),n.setState({valueCaptcha:"",captchaValidado:!0}),t({subject:"hola",captcha:!0})):n.setState({valueCaptcha:"",captchaValidado:!1,errorCaptchaInvalido:!0})},n.getCustomLauncher=function(e){return r.a.createElement("button",{onClick:e},"CHAT!")},n.onFileUpload=function(e){var t=n.props.handlerFileMessage;console.log("e targe",e),t(e)},(0,e.startWidget)(e.containerData),n.state={record:!1,valueCaptcha:"",captchaValidado:!1,errorCaptchaInvalido:!1},n.onStop=n.onStop.bind(Object(xe.a)(n)),n.doSubmit=n.doSubmit.bind(Object(xe.a)(n)),n}return Object(s.a)(a,[{key:"onData",value:function(e){}},{key:"onStop",value:function(e){var t=ye("idConversartion"),a=t||{},n=a.idConversartion,r=a.startConversation,o=this.props.handlerFileMessage;document.querySelector(".sound-wave").style.display="none";document.querySelector(".rcw-send").style.display="block";var c=document.querySelector(".attach-widget-send-audio");c&&(c.style.display="none"),n?o({files:[e],isVoiceRecord:!0}):r(e)}},{key:"cerrar",value:function(){var e=ye("company_id"),t=(t="https://us-central1-chat-asesores-prueba.cloudfunctions.net/abandono")+"?idConv="+ye("idConversartion").idConversartion+"&idCompany="+e;navigator.sendBeacon(t,"")}},{key:"componentWillMount",value:function(){(0,this.props.consultaTypeWriter)()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.listenerResponse,n=t.containerData,r=(t.company,t.chatOpened),o=ye("idConversartion"),c=(o||{}).idConversartion,i=(document.querySelector(".rcw-launcher").style.display="none",$e()(".rcw-close-widget-container .rcw-launcher"));if(i){if("1029"===n.company)document.querySelector(".rcw-launcher img").setAttribute("src","https://firebasestorage.googleapis.com/v0/b/chat-asesores-3.appspot.com/o/alcaldiaBogota%2FbotonChatico.png?alt=media&token=db90b93a-c780-4ade-a611-20d5b193e97c");if("1031"===n.company)document.querySelector(".rcw-launcher img").setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/ideam/gaiaInicioBot2.png");if("1032"===n.company)document.querySelector(".rcw-launcher img").setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/agn/Rosa_chat_bot_logo-min.png");i.title="Hola \xbfEn qu\xe9 puedo ayudarte?"}var s=this;($e()(document).on("click",".fake-button.close",(function(){s.hideConversation()})),c)?(he("idConversartion",JSON.stringify({idConversartion:c})),a(c)):(document.querySelector(".rcw-widget-container").classList.add("chat-closed"),$e()(document).on("click",".chat-closed .rcw-launcher",(function(){s.showConversation()})));$e()(document).on("click",".rcw-close-button",(function(e){$e()("body").removeClass("chat-opened"),document.querySelector(".main-wrapper").setAttribute("style","z-index: 599!important"),document.querySelector(".rcw-widget-container").setAttribute("style","width: 0%!important");var t=document.querySelector(".sound-wave");t&&(t.style.display="none");var a=document.querySelector(".attach-widget-send-audio");if(a&&(a.style.display="none"),"1029"===n.company){var r=document.querySelector(".chat-opened"),o=document.querySelector(".rcw-launcher"),c=document.querySelector(".rcw-launcher img");null!=r&&r?(c.removeAttribute("width"),c.style.width="20px",o.style.width="48px",o.style.height="48px",c.setAttribute("src",Dt)):c&&(o.style.padding="0px 0px 0px 0px",c.style.width="62px",c.setAttribute("src","https://firebasestorage.googleapis.com/v0/b/chat-asesores-3.appspot.com/o/alcaldiaBogota%2FbotonChatico.png?alt=media&token=db90b93a-c780-4ade-a611-20d5b193e97c"))}if("1031"===n.company){r=document.querySelector(".chat-opened"),o=document.querySelector(".rcw-launcher"),c=document.querySelector(".rcw-launcher img");null!=r&&r?(c.removeAttribute("width"),c.style.width="20px",o.style.width="48px",o.style.height="48px",o.style.borderRadius="50%",c.setAttribute("src",Dt)):c&&(o.style.padding="0px 0px 0px 0px",c.style.width="62px",c.setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/ideam/gaiaInicioBot2.png"))}if("1032"===n.company){r=document.querySelector(".chat-opened"),o=document.querySelector(".rcw-launcher"),c=document.querySelector(".rcw-launcher img");if(null!=r&&r?(c.removeAttribute("width"),c.style.width="20px",o.style.width="48px",o.style.height="48px",o.style.borderRadius="50%",c.setAttribute("src",Dt)):c&&(o.style.padding="0px 0px 0px 0px",c.style.width="62px",c.setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/agn/Rosa_chat_bot_logo-min.png")),document.querySelector(".formInicio")){var i=document.querySelector(".MuiSvgIcon-root.icon-title");if(i){var s=document.createElement("img");s.className="icon-title",s.src=Dt,s.style.width="20px",s.style.height="20px",s.style.objectFit="contain",i.replaceWith(s)}}else{var l=document.querySelector(".rcw-launcher");l&&(l.style.position="relative",l.style.right="-23px")}}})),$e()(document).on("click",".rcw-launcher",(function(t){if($e()(t.currentTarget).hasClass("rcw-hide-sm")){$e()("body").addClass("chat-opened");var a=document.querySelector(".form-container");if(a&&(a.style.bottom="20px"),e.state.record){document.querySelector(".sound-wave").style.display="block",document.querySelector(".rcw-send").style.display="none";var n=document.querySelector(".attach-widget-send-audio");n&&(n.style.display="block")}document.querySelector(".main-wrapper").setAttribute("style","z-index: 600!important"),document.querySelector(".rcw-widget-container").setAttribute("style","")}else{$e()("body").removeClass("chat-opened");var r=document.querySelector(".sound-wave"),o=document.querySelector(".attach-widget-send-audio");r&&(r.style.display="none"),o&&(o.style.display="none")}})),r&&this.lauchChatWidget(),this.attachFormSubmitListener();var l=function(){var e=!1,t=document.querySelector(".image-title");t&&!t.hasAttribute("alt")&&(t.setAttribute("alt","Logo institucional del asistente virtual"),t.setAttribute("title","Logo institucional del asistente virtual"),e=!0);var a=document.querySelector(".rcw-avatar");a&&!a.hasAttribute("alt")&&(a.setAttribute("alt","Avatar del asistente virtual"),a.setAttribute("title","Avatar del asistente virtual"),e=!0),document.querySelectorAll("button").forEach((function(t){var a;"enviar"!==(null===(a=t.innerText)||void 0===a?void 0:a.trim().toLowerCase())||t.hasAttribute("aria-label")||(t.setAttribute("aria-label","Enviar formulario para iniciar el chat"),t.setAttribute("title","Enviar formulario para iniciar el chat"),e=!0)}));var n=document.querySelector(".rcw-send");return n&&!n.hasAttribute("aria-label")&&(n.setAttribute("aria-label","Enviar mensaje"),n.setAttribute("title","Enviar mensaje"),e=!0),e};if(!l())var u=0,m=setInterval((function(){u++,(l()||u>20)&&clearInterval(m)}),500);document.querySelectorAll("form[name='chatReduxForm'] input, form[name='chatReduxForm'] select, form[name='chatReduxForm'] textarea").forEach((function(t){t.addEventListener("keydown",(function(a){"Enter"===a.key&&(a.preventDefault(),a.stopPropagation(),t.blur(),setTimeout((function(){e.validations(e.props.reduxCompanyForm)?console.log("\u2705 Formulario v\xe1lido (se puede enviar)"):console.warn("\u274c Faltan campos obligatorios")}),100))}))}))}},{key:"attachFormSubmitListener",value:function(){var e=this,t=document.querySelector("form[name='chatReduxForm']");t&&"true"!==t.dataset.listenerAttached&&(t.dataset.listenerAttached="true",t.addEventListener("submit",(function(a){a.preventDefault(),a.stopPropagation();var n=e.props.reduxCompanyForm;e.validations(n)?(console.log("\u2705 Validaci\xf3n completa, se puede enviar."),e.props.startConversation(n)):(console.warn("\u274c Validaci\xf3n fallida, formulario incompleto."),t.querySelectorAll("input[required], select[required], textarea[required]").forEach((function(e){e.value.trim()?(e.classList.remove("input-error"),e.removeAttribute("aria-invalid")):(e.classList.add("input-error"),e.setAttribute("aria-invalid","true"))})))})))}},{key:"addCustomButtonLogo",value:function(e){var t=document.querySelector(".rcw-launcher img");t&&t.setAttribute("src",e)}},{key:"addCustomHeader",value:function(e){setTimeout((function(){var t=document.querySelector(".rcw-header"),a=document.querySelector(".chat-image-header"),n=e||"",r=document.createElement("IMG");r.setAttribute("class","chat-image-header"),n&&r.setAttribute("src",n),t&&(void 0!==a&&$e()(".chat-image-header").remove(),t.appendChild(r))}),10)}},{key:"componentDidUpdate",value:function(e){var t,a=this,n=this.props,r=n.playSound,o=n.enableFormClient,c=n.containerData,i=n.startWidget,s=n.startWidgetFlag,l=n.flagNewChat,u=n.conversationData,m=n.enviarEncuesta,d=n.showCaptcha,p=n.iniciaChatAbierto,b=n.cambiarEstadoChatAbiertoFalse,v=n.company,h=ye("idConversartion"),y=(h||{}).idConversartion,f=document.querySelector(".chat-opened");if(document.querySelector(".rcw-launcher")&&(document.querySelector(".rcw-launcher").title=v.botonTitle?v.botonTitle:"Hola \xbfEn qu\xe9 puedo ayudarte?"),p||f){var g=document.querySelector(".rcw-send img"),E=document.querySelector(".rcw-launcher");g&&("1029"===c.company?(E.style.width="48px",E.style.height="48px",E.style.backgroundColor="#d82200",g.setAttribute("src",Tt)):g.setAttribute("src",Ft),g.setAttribute("title","Enviar mensaje")),b()}var C=!1,w=document.querySelector("#canv"),N=document.querySelector(".rcw-new-message"),j=document.querySelector(".chat-widget-panel");if(this.props.startWidgetFlag&&e.startWidgetFlag!==this.props.startWidgetFlag){var x=document.querySelector(".rcw-launcher");x&&(x.style.display="flex"),$e()(document).on("click",".rcw-launcher",(function(e){C=!!a.props.company&&a.props.company.logoNombre,a.addCustomHeader(C);var t=document.querySelector(".rcw-send-icon");if(t&&("1029"===c.company?(console.log("entroo alcaldia"),t.setAttribute("src",Tt)):t.setAttribute("src",Ft),t.setAttribute("title","Enviar mensaje")),"1029"===c.company){var n=document.querySelector(".chat-opened"),r=document.querySelector(".rcw-launcher"),o=document.querySelector(".rcw-launcher img");null!=n||p?(r.style.backgroundColor="#d82200",o.removeAttribute("width"),o.style.width="20px",r.style.width="48px",r.style.height="48px",o.setAttribute("src",Dt)):o&&(r.style.padding="0px 0px 0px 0px",o.style.width="73px",r.style.width="70px",r.style.height="70px",o.setAttribute("src","https://firebasestorage.googleapis.com/v0/b/chat-asesores-3.appspot.com/o/alcaldiaBogota%2FbotonChatico.png?alt=media&token=db90b93a-c780-4ade-a611-20d5b193e97c"),r.style.backgroundColor="rgba(0, 0, 0, 0)")}if("1031"===c.company){var i=document.querySelector(".chat-opened"),s=document.querySelector(".rcw-launcher"),l=document.querySelector(".rcw-launcher img");s&&l&&(null!=i||p?(s.style.background="rgb(1,161,223) linear-gradient(0deg, rgba(0,198,155,1) 10%, rgba(0,144,255,1) 100%)",s.style.display="flex",s.style.alignItems="center",s.style.justifyContent="center",s.style.width="48px",s.style.height="48px",s.style.borderRadius="50%",l.removeAttribute("width"),l.style.width="20px",l.style.height="20px",l.style.objectFit="contain",l.setAttribute("src",Dt),l.setAttribute("alt","Cerrar asistente virtual"),l.setAttribute("title","Cerrar asistente virtual")):(s.style.width="100px",s.style.height="80px",s.style.background="transparent",s.style.border="none",s.style.display="grid",s.style.alignItems="center",s.style.justifyContent="center",s.style.padding="0",s.style.boxShadow="none",l.setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/ideam/gaiaInicioBot2.png"),l.setAttribute("alt","Logo Gaia IDEAM"),l.setAttribute("title","Asistente virtual IDEAM"),l.style.width="100px",l.style.height="100px",l.style.objectFit="cover",l.style.margin="-11px 12px",l.style.display="block"))}if("1032"===c.company){var u=document.querySelector(".chat-opened"),m=document.querySelector(".rcw-launcher"),d=document.querySelector(".rcw-launcher img"),b=document.querySelector(".active");if(console.log(b),m&&d&&(null!=u||p?(m.style.background="rgb(1,161,223) linear-gradient(0deg, rgba(0,198,155,1) 10%, rgba(0,144,255,1) 100%)",m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="center",m.style.width="48px",m.style.height="48px",m.style.borderRadius="50%",d.removeAttribute("width"),d.style.width="20px",d.style.height="20px",d.style.objectFit="contain",d.setAttribute("src",Dt),d.setAttribute("alt","Cerrar asistente virtual"),d.setAttribute("title","Cerrar asistente virtual")):(m.style.width="100px",m.style.height="80px",m.style.background="transparent",m.style.border="none",m.style.alignItems="center",m.style.justifyContent="center",m.style.padding="0",m.style.boxShadow="none",d.setAttribute("src","https://storage.googleapis.com/chat-asesores-3.appspot.com/agn/Rosa_chat_bot_logo-min.png"),d.setAttribute("alt","Logo AGN"),d.setAttribute("title","Asistente virtual AGN"),d.style.width="100px",d.style.height="100px",d.style.objectFit="cover",d.style.margin="-11px 12px",d.style.display="block")),document.querySelector(".formInicio")){var v=document.querySelector(".MuiSvgIcon-root.icon-title");if(v){var h=document.createElement("img");h.className="icon-title",h.src=Dt,h.style.width="20px",h.style.height="20px",h.style.objectFit="contain",v.replaceWith(h)}}else{var y=document.querySelector(".rcw-launcher");y&&(y.style.position="relative",y.style.right="-23px")}}}))}if(d&&e.showCaptcha!==d&&!1===u&&w&&Object(tt.b)(6,"red","white"),u&&N&&N.removeAttribute("disabled"),10!==(null===(t=e.conversationData)||void 0===t?void 0:t.estado)||u||w&&Object(tt.b)(6),this.props.creandoConversacion&&e.creandoConversacion!==this.props.creandoConversacion&&this.setState({captchaValidado:!1}),o&&y?j&&document.querySelector(".chat-widget-panel").classList.remove("container-disabled"):(!o&&!y||!o&&y)&&j&&document.querySelector(".chat-widget-panel").classList.remove("container-disabled"),l){var S=document.querySelector(".rcw-widget-container");S&&S.setAttribute("style","width: 100%!important")}(u&&u.agente&&"Chatbot"===u.agente.nombres&&10===u.estado&&m(!1),s||(this.openNewChat(),i(c),C=!!this.props.company&&this.props.company.logoNombre,this.addCustomHeader(C)),r)&&document.getElementById("audio-element").play();this.attachFormSubmitListener();var O=document.querySelector(".rcw-widget-container"),k=null===O||void 0===O?void 0:O.classList.contains("chat-closed"),A=document.querySelector(".form-container.formInicio");y||k||!A?k&&A&&(A.style.display="none"):(A.style.display="flex",A.style.visibility="visible")}},{key:"showConversation",value:function(){var e=this.props,t=e.showCaptcha,a=e.conversationData,n=e.enableFormClient,r=e.clientFormConf,o=document.querySelector(".rcw-new-message");document.querySelector(".form-container")&&(document.querySelector(".form-container").style.display="flex"),!a&&(n||t||r)&&o&&o.setAttribute("disabled",!0),document.querySelector(".rcw-widget-container").classList.remove("chat-closed")}},{key:"hideConversation",value:function(){var e=document.querySelector(".rcw-launcher.rcw-hide-sm"),t=document.querySelector(".form-container");e&&e.click(),t&&(t.style.display="none"),document.querySelector(".rcw-widget-container").classList.add("chat-closed")}},{key:"openNewChat",value:function(){document.querySelector(".form-container")&&(document.querySelector(".form-container").style.display="flex")}},{key:"render",value:function(){var e=this,t=this.props,a=t.sendResponse,n=t.updateAttributes,o=t.message,c=t.selectedCompanyForm,i=t.startConversation,s=t.conversationData,l=t.enviarEncuesta,u=t.company,m=t.horario,d=t.reduxCompanyForm,p=t.encuestaConf,b=t.clientFormConf,v=t.enableFormClient,h=t.startWidgetFlag,y=(t.handlerFileMessage,t.uploading),f=t.creandoConversacion,g=t.showCaptcha,E=t.sendingFlow,C=t.startWidget,w=t.containerData,N=h&&!v;function j(e){return Object.keys(e).sort().reduce((function(t,a){return t[a]=e[a],t}),{})}var x=ye("idConversartion"),S=(x||{}).idConversartion,O="".concat(m?m.textoHorario:""),k=s&&s.estado?s.estado:null;void 0===S&&(k=!1),11===k&&(fe("clienteData"),fe("idConversartion"),C(w));var A,I=r.a.createElement("div",null);return this.addCustomHeader(u.logoNombre),r.a.createElement("div",{className:"chat-demo-wrapper chatico-".concat(u.cuenta)},r.a.createElement(et.a,{onBeforeunload:function(t){e.cerrar()}}),!S&&r.a.createElement("div",null,v&&b?r.a.createElement("div",{className:"form-container formInicio",id:"formInicio"},f?I:r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{formName:"chatReduxForm",customHeader:u.logo,formTitle:u.nombre,formSubTitle:O,items:function(e){var t=[];if(b){var a=j(e);for(var n in a){var r={label:a[n].nombre,name:a[n].nombreCorto,placeholder:"",hint:"",type:a[n].type,typeForm:a[n].type,value:!1,options:[],disable:!1};"select"===a[n].type?(r.options=a[n].opcionesRespuesta,r.className="rs-100",t.push(r)):"radio"===a[n].type?(r.options=a[n].opcionesRespuesta,r.className="rs-100 radio radioTerms",t.push(r)):(r.className="rs-100",t.push(r))}}else t=!1;return t}(b),className:"conversation",card:!1,handleSubmit:function(t){e.validations(t)?(console.log("pasa validaciones"),i(d)):console.log("no pasa ")},validations:this.validations,buttons:m&&m.valido?(A=function(){return i(d)},[{label:"Enviar",className:"auth-btn-send",action:!1,style:"primary",primary:!0,onClick:A}]):[]}),m&&!m.valido?r.a.createElement(Ye.a,{value:"worst",label:"Estimado usuario, se encuentra fuera de horario para ser atendido."}):""),!f&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"fake-field"}),r.a.createElement("div",{className:"fake-button close"},r.a.createElement("button",{className:"rcw-close-button rcw-fake-close-button"},r.a.createElement("img",{src:Dt,className:"rcw-close",alt:"close"}))))):g&&r.a.createElement("div",{className:"form-container formInicio formCaptcha",id:"formInicio"},f?I:r.a.createElement(pa,{state:this.state,subtitle:"Para comprobar que es un humano escriba los caracteres que ve en el siguiente recuadro para poder\r continuar al chat.",logo:u.logo,reloadText:"Cambiar caracteres",doSubmit:this.doSubmit,setState:this.setState,renderThis:this,svgIconX:Dt,placeholder:"Escriba el valor del captcha"}))),s&&s.agente&&"Chatbot"!==s.agente.nombres&&k&&10===k&&p?r.a.createElement("div",{className:"form-container zindex2000 encuestaStyles"},r.a.createElement($t,{formName:"conversationForm",items:function(e){var t=[];if(e){var a=j(e);for(var n in a){var r={label:a[n].nombre,name:a[n].nombreCorto,placeholder:"",hint:"",type:a[n].type,typeForm:a[n].type,value:!1,options:[],disable:!1};"ratingStars"===a[n].type?(r.cancel=!1,r.className="rs-100 fixed-margin",r.stars=5,t.push(r)):(r.options=a[n].opcionesRespuesta,r.className="rs-100",t.push(r))}}return t}(p),formTitle:"Encuesta de Satisfacci\xf3n",customHeader:u.logo,formSubtitle:"La conversaci\xf3n ha finalizado, ay\xfadanos a mejorar calificando el servicio prestado.",values:c,submitted:o,updateAction:n,buttons:Wt((function(){return l(c)})),className:"conversation scroll"})):null,(N&&void 0===k||!k||10!==k)&&r.a.createElement("div",{className:"chat-widget-panel container-disabled ".concat(E?"df-sending-msg":"")},E&&r.a.createElement(da,{text:!1,className:"dfSpinnerContainer",spinnerClassName:"dialogFlowSpinner",color:"secondary",textClassName:"p-text-normal df-cargando",id:"dialogFlowSpinner",type:"linear"}),r.a.createElement(ua,{company:u,idConversartion:S,startConversation:i,handleNewUserMessage:function(e){a({newMessage:e,conversationData:s})}}),y?r.a.createElement("div",null):r.a.createElement("div",{className:"iconsContainer"},!!S&&r.a.createElement("div",{className:"iconoMicrofono"},r.a.createElement(zt.ReactMic,{record:this.state.record,className:"sound-wave ",onStop:this.onStop,onData:this.onData,strokeColor:"#FFFFFF",backgroundColor:"#DC143C",channelCount:1,mimeType:"audio/wav; codecs=MS_PCM"}),r.a.createElement(ea.a,{className:"attach-widget-microphone",onClick:this.startRecording,title:"Grabar voz"},r.a.createElement(ta.a,{style:{height:"1.3em",width:"2em"}})),r.a.createElement(ea.a,{className:"attach-widget-send-audio",onClick:this.stopRecording,title:"Parar y enviar audio"},r.a.createElement(aa.a,null))),!!S&&r.a.createElement("div",{className:"iconoAdjuntar"},r.a.createElement(ba.a,{accept:"*",onChange:this.onFileUpload},r.a.createElement(ea.a,{className:"attach-widget-file",title:"Adjuntar archivo","aria-label":"adjuntar"},r.a.createElement(nt.a,null)))))),r.a.createElement("audio",{id:"audio-element"},r.a.createElement("source",{src:Ke.a})))}}]),a}(n.Component),ha=Object(d.b)((function(e){return{responseMessage:ot(e),idConversartionState:ct(e),reduxCompanyForm:it(e),selectedCompanyForm:st(e),esperandoConv:lt(e),conversationData:ut(e),flagNewChat:mt(e),creandoConversacion:wt(e),company:dt(e),companyId:pt(e),horario:bt(e),playSound:vt(e),encuestaConf:ht(e),clientFormConf:yt(e),enableFormClient:ft(e),uploading:Et(e),startWidgetFlag:Ct(e),showCaptcha:Nt(e),sendingFlow:jt(e),iniciaChatAbierto:xt(e),chatOpened:St(e),typeWriterWeb:gt(e)}}),(function(e){return{updateAttributes:function(t){return e({type:"@authentication/updateAttribute",value:t})},sendResponse:function(t){return e({type:Ot,value:t})},listenerResponse:function(t){return e({type:kt,value:t})},textResponse:function(t){return e({type:"@chatbot/TEXTResponse",value:t})},startConversation:function(t){return e({type:At,value:t})},loadConversation:function(t){return e({type:"@chatbot/loadConversation",value:t})},listenerConversationInfo:function(t){return e({type:kt,value:t})},enviarEncuesta:function(t){return e({type:It,value:t})},startWidget:function(t){return e({type:"@chatbot/startWidget",value:t})},traerPreguntasEncuesta:function(t){return e({type:Mt,value:t})},mostrarWidget:function(t){return e({type:Lt,value:t})},handlerFileMessage:function(t){return e({type:"@chatbot/handleFileMessage",value:t})},cambiarEstadoChatAbiertoTrue:function(t){return e({type:"@chatbot/iniciarChatAbierto",value:t})},cambiarEstadoChatAbiertoFalse:function(t){return e({type:"@chatbot/cambiarEstadoChatAbierto",value:t})},consultaTypeWriter:function(t){return e({type:"@chatbot/consultaTypeWriterWeb",value:t})}}}))(va),ya={responseMessage:!1,idConversation:!1,selectedCompanyForm:{},esperandoConv:!1,dataConversation:!1,flagNewChat:!1,startWidget:!1,company:!1,company_id:!1,horario:!1,playSound:!1,infoEncuesta:!1,infoFormClient:!1,enableFormClient:!1,showWidget:!1,typeWriterWeb:!1,uploading:!1,botEnabled:!1,creandoConversacion:!1,isEnabledCaptchaValidation:!1,sendingFlow:!1,iniciaChatAbierto:!1},fa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ya,t=arguments.length>1?arguments[1]:void 0,a=Object(V.a)({},e),n=t.payload,r=t.type,o=t.value;a.esperandoConv=!0,a.playSound=!1;var c=Object(V.a)({},a.selectedCompanyForm);switch(r){case"@authentication/updateAttribute":var i=o.fieldName,s=o.fieldValue;return c[i]=s,a.selectedCompanyForm=c,Object(V.a)({},a);case Ot:return Object(V.a)({},a);case At:return a.dataConversation=!1,a.idConversation=!1,a.creandoConversacion=!0,Object(V.a)({},a);case"@chatbot/startConversationSuccess":return a.esperandoConv=!1,a.idConversation=n.conversationId,a.selectedCompanyForm={},a.creandoConversacion=!1,Object(V.a)({},a);case"@chatBot/listenerResponseSuccess":return a.dataConversation=n,Object(V.a)({},a);case"@chatbot/playSound":return a.playSound=n.play,Object(V.a)({},a);case"@chatbot/iniciarChatAbierto":return a.iniciaChatAbierto=!0,Object(V.a)({},a);case"@chatbot/cambiarEstadoChatAbierto":return a.iniciaChatAbierto=!1,Object(V.a)({},a);case"@chatbot/enviarEncuestaSuccess":return a.esperandoConv=n.esperandoNuevaConv,a.idConversation=n.idConv,a.dataConversation=n.convData,a.flagNewChat=n.flag,a.startWidget=!1,Object(V.a)({},a);case"@chatbot/obtenerInfoConfEncuestaSuccess":return a.infoEncuesta=n,Object(V.a)({},a);case"@chatbot/handleFileMessage":return a.uploading=!0,Object(V.a)({},a);case"@chatbot/handleFileMessageSuccess":return a.uploading=!1,a.sendingFlow=!1,Object(V.a)({},a);case It:return Object(V.a)({},a);case"@chatbot/startWidgetSucces":return a.company=n.company,a.horario=n.horario,a.company_id=n.company_id,a.infoFormClient=n.formularioInicial,a.infoEncuesta=n.encuestaConf,a.enableFormClient=n.isEnabledClientForm,a.botEnabled=n.botEnabled,a.startWidget=!0,a.isEnabledCaptchaValidation=n.isEnabledCaptchaValidation,a.chatOpened=n.chatOpened,Object(V.a)({},a);case Lt:return a.showWidget=!0,Object(V.a)({},a);case"@chatbot/changeFlagShowWidget":return a.showWidget=!1,Object(V.a)({},a);case"@chatbot/typeWriterWidgetWebSuccess":return a.typeWriterWeb=n,console.log(a.typeWriterWeb,t),Object(V.a)({},a);case Rt:return a.sendingFlow=!0,Object(V.a)({},a);default:return Object(V.a)({},a)}},ga=a(361),Ea=a(269),Ca=a(362),wa=a.n(Ca),Na=a(376),ja=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.video,n=e.title;return r.a.createElement("div",{className:t},r.a.createElement(Na.a,{title:n,video:a}))}}]),a}(n.Component),xa=a(363),Sa=a.n(xa),Oa=a(768),ka=a(782),Aa=a(783),Ia=a(775),Ma=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).renderSimpleReply=function(e,t,a,n,o){return r.a.createElement("div",{className:"reply-wrapper ".concat(n)},r.a.createElement("div",{className:"caption"},r.a.createElement("p",{className:"caption-title"},t),r.a.createElement("span",{className:"caption-subtitle"},a)),r.a.createElement("div",{className:"options"},"  ",e.map((function(e,t){var a={newMessage:"",conversationData:{agente:{nombres:"Chatbot"}},reply:!0};return a.newMessage=e.value,r.a.createElement("div",{"aria-label":"Realizar acci\xf3n",title:"Realizar acci\xf3n",key:t,onClick:function(){return o(a)},className:"option-item ".concat(e.value)},e.label)}))," "))},e.renderListReply=function(e,t,a,n,o,c){return r.a.createElement(Oa.a,{className:"panelReply"},r.a.createElement(ka.a,{expandIcon:r.a.createElement(Sa.a,null),"aria-controls":"panel1a-content",id:"panel1a-header",sx:{"& .MuiAccordionSummary-content":{marginTop:"10px",marginBottom:"5px"},"& .MuiAccordionSummary-content.Mui-expanded":{marginTop:"10px",marginBottom:"5px"}}},r.a.createElement("div",null,r.a.createElement("div",{className:"titleSubtitle"},r.a.createElement(Ia.a,null,r.a.createElement("span",{style:{fontWeight:"600"},className:"title"},t)),r.a.createElement(Ia.a,null,r.a.createElement("span",{className:"subtitle"},a))))),r.a.createElement(Aa.a,null,r.a.createElement("div",{className:"list-container ".concat(n)},r.a.createElement("div",{className:"list-items-wrapper"},"  ",e.map((function(e,t){return r.a.createElement("div",{key:t,className:"options grid"},"  ",e.options.map((function(e,a){var n={newMessage:"",conversationData:{agente:{nombres:"Chatbot"}},reply:!0};return n.newMessage=e.postbackText,r.a.createElement("div",{key:a,className:"list-item col-6"},r.a.createElement("div",{className:"left-item "},r.a.createElement("div",{className:"item-title"},e.title),r.a.createElement("div",{className:"item-subtitle"},e.description),r.a.createElement("div",{"aria-label":"Realizar acci\xf3n",title:"Realizar acci\xf3n",key:t,onClick:function(){return o(n)},className:"option-item ".concat(e.postbackText)},r.a.createElement("div",null,e.postbackText))),e.imagen&&r.a.createElement("div",{className:"right-item"},r.a.createElement(Oe.a,{className:"item-image",src:e.imagen,alt:e.title})))}))," ")}))," "))))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=e.options,a=e.title,n=e.subtitle,r=e.className,o=e.sendResponse,c=e.type,i=e.items,s=e.image,l=e.startConversation,u=!1,m=ye("idConversartion"),d=ye("tipoMensajeBienvenida"),p=!1;return m?p=o:m||"quick_reply"!==d||(p=l),"quick_reply"===c?u=this.renderSimpleReply(t,a,n,r,p):"list"===c&&(u=this.renderListReply(i,a,n,r,p,s)),u}}]),a}(n.Component),La=Object(d.b)((function(e){return{}}),(function(e){return{sendResponse:function(t){return e({type:Ot,value:t})},startConversation:function(t){return e({type:At,value:t})}}}))(Ma),Da=(a(601),a(602),a(603),a(364)),Ra=a(365),Fa=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={products:[],title:""},n.responsiveOptions=[{breakpoint:"1024px",numVisible:2,numScroll:2},{breakpoint:"800px",numVisible:1,numScroll:1},{breakpoint:"480px",numVisible:1,numScroll:1}],n.productTemplate=n.productTemplate.bind(Object(xe.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.setState({products:this.props.options,title:this.props.title})}},{key:"productTemplate",value:function(e){var t=this.props.sendResponse,a={newMessage:"",conversationData:{agente:{nombres:"Chatbot"}},carousel:!0};return a.newMessage=e.value,r.a.createElement("div",{className:"product-item"},r.a.createElement("div",{className:"product-item-content"},r.a.createElement("div",{className:"p-mb-3"},r.a.createElement("img",{alt:"Imagen ilustrativa del carrusel",title:"Imagen ilustrativa del carrusel",src:"".concat(e.image),onError:function(e){return e.target.src="https://www.primefaces.org/wp-content/uploads/2020/05/placeholder.png"},className:"product-image"})),r.a.createElement("div",null,r.a.createElement("div",{className:"car-buttons p-mt-5"},r.a.createElement(Ra.Button,{"aria-label":"Realizar acci\xf3n",title:"Realizar acci\xf3n",className:"p-button p-button-rounded p-mr-2",onClick:function(){return t(a)}},e.label)))))}},{key:"render",value:function(){return r.a.createElement("div",{className:"carousel-demo"},r.a.createElement("div",{className:"card"},r.a.createElement(Da.Carousel,{value:this.state.products,numVisible:2,numScroll:1,responsiveOptions:this.responsiveOptions,className:"custom-carousel",circular:!0,autoplayInterval:1e4,itemTemplate:this.productTemplate,header:r.a.createElement("h5",null,this.state.title),showNavigators:!0,prevIcon:"pi pi-chevron-left",nextIcon:"pi pi-chevron-right"})))}}]),a}(n.Component),Ta=Object(d.b)((function(e){return{}}),(function(e){return{sendResponse:function(t){return e({type:Ot,value:t})}}}))(Fa),Wa=a(377),Pa=a(116),za=X.a.mark(Ba);function Ba(e){var t;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,t=!1,a.next=4,re.collection("company").where("cuenta","==",e).get().then((function(e){e.forEach((function(e){t=e}))}));case 4:return a.abrupt("return",t);case 7:throw a.prev=7,a.t0=a.catch(0),console.log("company.consultarEmpresa",a.t0),a.t0;case 11:case"end":return a.stop()}}),za,null,[[0,7]])}function qa(e){return{type:"@chatbot/startConversationSuccess",payload:e}}function _a(e){return{type:"@chatbot/typeWriterWidgetWebSuccess",payload:e}}function Ua(e){return{type:kt,payload:e}}function Ha(e){return{type:"@chatBot/listenerResponseError",payload:e}}function Va(e){return{type:"@chatbot/enviarEncuestaError",payload:e}}function Za(e){return{type:"@chatbot/startWidgetError",payload:e}}function Ga(e){return{type:"@chatbot/startWidgetSucces",payload:e}}function Ja(e){return{type:"@chatbot/playSound",payload:e}}function Qa(e){return{type:"@chatbot/handleFileMessageSuccess",payload:e}}var Ka=X.a.mark(Xa),Ya=X.a.mark($a);function Xa(e,t,a,n){return X.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.prev=0,console.log("bodyEncuesta***",n),re.collection("company").doc(e).collection("conversations").doc(t).update({estado:a,encuesta:n}),r.next=9;break;case 5:throw r.prev=5,r.t0=r.catch(0),console.error("controller.conversation.fijarDatosEncuesta",r.t0),r.t0;case 9:case"end":return r.stop()}}),Ka,null,[[0,5]])}function $a(e,t){var a;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.prev=0,re.collection("company").doc(e).collection("conversations").doc(t).get().then((function(t){(a=!(!t.data().agente||!t.data().agente.idDoc)&&t.data().agente.idDoc)&&re.collection("company").doc(e).collection("connectedUsers").doc(a).update({last_survey:new Date})})),n.next=8;break;case 4:throw n.prev=4,n.t0=n.catch(0),console.error("controller.conversation.actualizarConnectedUser",n.t0),n.t0;case 8:case"end":return n.stop()}}),Ya,null,[[0,4]])}var en=X.a.mark(rn),tn=X.a.mark(on),an=X.a.mark(cn),nn=X.a.mark(sn);function rn(e,t){var a;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=!1,!e){n.next=7;break}return n.next=5,re.collection("company/".concat(e,"/configuration")).doc(t).get().then((function(e){e.exists&&(a=e.data().value)}));case 5:n.next=9;break;case 7:return n.next=9,re.collection("configuration").doc(t).get().then((function(e){e.exists&&(a=e.data().value)}));case 9:return n.abrupt("return",a);case 12:throw n.prev=12,n.t0=n.catch(0),console.error("configuration.consultarProperty :"+n.t0),n.t0;case 16:case"end":return n.stop()}}),en,null,[[0,12]])}function on(e,t){var a;return X.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=!1,n.next=4,re.collection("company/".concat(e,"/configuration")).doc(t).get().then((function(e){e.exists&&(a=e.data())}));case 4:return n.abrupt("return",a);case 7:throw n.prev=7,n.t0=n.catch(0),console.error("configuration.consultarProperty :"+n.t0),n.t0;case 11:case"end":return n.stop()}}),tn,null,[[0,7]])}function cn(e){var t,a,n,r,o;return X.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,rn(e,"HORARIO_HABIL");case 2:if(t=c.sent,a=new Date,(n=new Array(7))[0]="DOMINGO",n[1]="LUNES",n[2]="MARTES",n[3]="MIERCOLES",n[4]="JUEVES",n[5]="VIERNES",n[6]="SABADO",r=n[a.getDay()],o=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),!t[o]){c.next=22;break}return c.next=17,sn(t[o]);case 17:return c.t0=c.sent,c.t1=ln(t),c.abrupt("return",{valido:c.t0,textoHorario:c.t1});case 22:if(!t[r]){c.next=30;break}return c.next=25,sn(t[r]);case 25:return c.t2=c.sent,c.t3=ln(t),c.abrupt("return",{valido:c.t2,textoHorario:c.t3});case 30:if(0!==a.getDay()&&6!==a.getDay()){c.next=38;break}return c.next=33,sn(t.WEEKEND_HOURS);case 33:return c.t4=c.sent,c.t5=ln(t),c.abrupt("return",{valido:c.t4,textoHorario:c.t5});case 38:return c.next=40,sn(t.REG_HOURS);case 40:return c.t6=c.sent,c.t7=ln(t),c.abrupt("return",{valido:c.t6,textoHorario:c.t7});case 43:case"end":return c.stop()}}),an)}function sn(e){var t,a,n,r,o,c,i,s,l;return X.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(t=new Date,a=t.getHours(),n=t.getMinutes(),r=e.ini.split(":"),o=parseInt(r[0]),c=parseInt(r[1]),i=e.fin.split(":"),s=parseInt(i[0]),l=parseInt(i[1]),!(o>s||o==s&&c>l)){u.next=13;break}return u.abrupt("return",!1);case 13:if(!(a>o&&a<s)){u.next=17;break}return u.abrupt("return",!0);case 17:if(!(a==o&&n>=c)){u.next=21;break}return u.abrupt("return",!0);case 21:if(!(a==s&&n<=l)){u.next=25;break}return u.abrupt("return",!0);case 25:return u.abrupt("return",!1);case 26:case"end":return u.stop()}}),nn)}function ln(e){try{var t="Por favor tener presente que el horario de atenci\xf3n de nuestros asesores es \n\t\t\t\tde lunes a viernes de ".concat(e.REG_HOURS.ini," a ").concat(e.REG_HOURS.fin);return"00:00"==e.WEEKEND_HOURS.ini||"00:00"==e.WEEKEND_HOURS.fin||e.DOMINGO||e.SABADO?"00:00"!=e.WEEKEND_HOURS.ini&&"00:00"!=e.WEEKEND_HOURS.fin&&e.DOMINGO&&"00:00"==e.DOMINGO.ini&&(t+=", s\xe1bados de\n\t\t\t\t".concat(e.WEEKEND_HOURS.ini," a ").concat(e.WEEKEND_HOURS.fin,", domingos y festivos\n\t\t\t\tno se presta el servicio.")):t+=" y sabados, domingos y festivos de\n\t\t\t\t".concat(e.WEEKEND_HOURS.ini," a ").concat(e.WEEKEND_HOURS.fin),t}catch(a){throw console.error("configuration.stringifyHorarioHabil",a),a}}var un=X.a.mark(mn);function mn(e,t,a,n){var r;return X.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,r={param_Hijo:n,idCompany:e,idConv:t,msge:a},"https://us-central1-chat-asesores-prueba.cloudfunctions.net/dialogFlowExterno",o.next=5,Object($.a)(fetch,"https://us-central1-chat-asesores-prueba.cloudfunctions.net/dialogFlowExterno",{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":"true","Access-Control-Request-Headers":"access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,auth,authorization,cache-control,content-type,mode",accept:"application/json, text/plain, */*","Content-Type":"application/json","Cache-Control":"no-cache","cache-control":"no-cache"},body:JSON.stringify(r)});case 5:o.sent,o.next=12;break;case 8:throw o.prev=8,o.t0=o.catch(0),console.error("DialogFlow.mensajeDialogflow:",o.t0),o.t0;case 12:case"end":return o.stop()}}),un,null,[[0,8]])}var dn=X.a.mark(Nn),pn=X.a.mark(jn),bn=X.a.mark(xn),vn=X.a.mark(On),hn=X.a.mark(kn),yn=X.a.mark(An),fn=X.a.mark(In),gn=X.a.mark(Mn),En=X.a.mark(Ln),Cn=X.a.mark(Dn),wn=X.a.mark(Tn);function Nn(e){var t,a,n,r,o,c,i,s,l,u,m,d,p,b,v,h,y;return X.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return a=ye("company_id"),n=ye("idConversartion"),r=n.idConversartion,o=ye("clienteData"),f.next=5,Object($.c)(gt);case 5:if(c=f.sent,i=e.value,s=i.client,l=i.reply,u=i.fileMessage,m=i.conversationData,d=i.newMessage,p=d.toString(),!l){f.next=11;break}return f.next=11,Object(Pt.addUserMessage)(p);case 11:return b={fecha:new Date,from:{tipo:"cliente",cliente:o||{nombre:"cliente prueba",mail:"mail prueba"}},mensaje:{text:!u&&p,type:u?u.type:"text",caption:u?u.caption:"",title:u?u.title:"",filename:u?u.filename:"",url:u?u.url:""}},re.collection("company").doc(a).collection("conversations").doc(r).collection("mensajes").add(b),(v={last_message:new Date}).search=oe.arrayUnion(p.trim()),re.collection("company").doc(a).collection("conversations").doc(r).update(v),f.next=18,rn(a,"MULTIPLES_HIJOS");case 18:return h=f.sent,y=!1,h&&(y="hijo1"),f.next=23,rn(a,"BOT_ENABLED");case 23:if(!f.sent||"Chatbot"!==(null===(t=m.agente)||void 0===t?void 0:t.nombres)){f.next=29;break}return f.next=27,Object($.b)({type:Rt,payload:e});case 27:return f.next=29,mn(a,r,b.mensaje,y);case 29:if(!s){f.next=33;break}return console.log("addCustomMessage.SAGA.SENDRESPONSE"),f.next=33,Sn(u,c,null,s);case 33:return f.next=35,Object($.b)(Qa(e));case 35:case"end":return f.stop()}}),dn)}function jn(e){var t;return X.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,console.log(e),!(t=ye("consultaWriter"))||!t.eject){a.next=6;break}return a.next=6,Object($.b)(_a(t.value));case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.error(a.t0);case 11:case"end":return a.stop()}}),pn,null,[[0,8]])}function xn(e){var t,a,n,r,o,c,i,s,l,u,m;return X.a.wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return console.log("listenerResponse"),t=ye("idConversartion"),a=t.idConversartion,n=ye("company_id"),r=ye("clientFormEnabled"),o=re.collection("company").doc(n).collection("conversations").doc(a).collection("mensajes").orderBy("fecha","asc"),c=Object(K.b)((function(e){return o.onSnapshot(e)})),d.next=8,Object($.c)(gt);case 8:i=d.sent,s=i,(l=ye("consultaWriter"))&&l.eject&&!l.firstMessage&&(s=!1),d.prev=12,u=!1,m=X.a.mark((function t(){var a,n,o;return X.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=!1,t.next=3,Object($.d)(c);case 3:if(n=t.sent,o=!1,u?(o=!1,n.docChanges().forEach((function(e){"agente"===(a=e.doc.data()).from.tipo&&(o=!0,Sn(a.mensaje,i,o))}))):n.docs.forEach((function(t){"agente"===(a=t.data()).from.tipo?(o=!0,Sn(a.mensaje,s,o)):(e.value||r)&&Sn(a.mensaje,s,!0,!0)})),!o){t.next=9;break}return t.next=9,Object($.b)(Ja({play:!0}));case 9:u=!0,n.docChanges().forEach((function(e){a=e.doc.data()}));case 11:case"end":return t.stop()}}),t)}));case 15:return d.delegateYield(m(),"t0",17);case 17:d.next=15;break;case 19:d.next=24;break;case 21:d.prev=21,d.t1=d.catch(12),console.error(d.t1);case 24:case"end":return d.stop()}}),bn,null,[[12,21]])}function Sn(e,t,a,n){"text"!==e.type||n?"text"===e.type&&n?Object(Pt.addUserMessage)(e.text):"image"===e.type||"sticker"===e.type?n?Object(Pt.renderCustomComponent)(Oe.a,{className:"image-mesage ".concat(n?"rcw-client client-message":""),src:e.url,alt:e.caption,title:e.caption},!n):Object(Pt.renderCustomComponent)(wa.a,{className:"image-mesage ".concat(n?"rcw-client client-message":""),image:e.url,alt:e.caption,doubleClickZoom:4},!n):"video"===e.type?Object(Pt.renderCustomComponent)(ja,{className:"video-mesage ".concat(n?"rcw-client client-message":""),video:e.url,title:e.caption},!n):"audio"===e.type?Object(Pt.renderCustomComponent)(Wa.a,{className:"audio-mesage ".concat(n?"rcw-client client-message":""),src:e.url,autoPlay:!1},!n):"quick_reply"===e.type?Object(Pt.renderCustomComponent)(La,{className:"quick-message ".concat(n?"rcw-client client-message":""),options:e.options,title:e.title,subtitle:e.subtitle,type:e.type},!n):"list"===e.type?Object(Pt.renderCustomComponent)(La,{className:"list-message ".concat(n?"rcw-client client-message":""),options:e.options,title:e.title,subtitle:e.body,type:e.type,items:e.items,image:e.url},!n):"carousel"===e.type?Object(Pt.renderCustomComponent)(Ta,{className:"list-message ".concat(n?"rcw-client client-message":""),options:e.options,title:e.title,subtitle:e.body,type:e.type,items:e.items,image:e.url},!n):"location"===e.type?Object(Pt.renderCustomComponent)("a",{className:"link-message rcw-message-text",title:e.name,href:"https://maps.google.com/maps/search/"+e.name+"/@"+e.latitude+","+e.longitude+",17z?hl=es",target:"_blank",children:e.name},!n):n?Object(Pt.renderCustomComponent)("a",{className:"link-message rcw-client client-message",title:e.filename,href:e.url,target:"_blank",children:e.filename},!1):Object(Pt.addLinkSnippet)({className:"link-mesage",title:e.filename,link:e.url,target:"_blank"}):Object(Pt.renderCustomComponent)(ma,{className:"rcw-message-text ",text:e.text,from:"AI",typeWriterWeb:t,nuevoMsge:a},!n)}function On(){var e,t,a,n,r,o,c;return X.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:e=ye("idConversartion"),t=e.idConversartion,a=ye("company_id"),n=re.collection("company").doc(a).collection("conversations").doc(t),r=Object(K.b)((function(e){return n.onSnapshot(e)})),o=!1,i.prev=5;case 6:return i.next=9,Object($.d)(r);case 9:if(c=i.sent,o=c.data(),!t){i.next=14;break}return i.next=14,Object($.b)({type:"@chatBot/listenerResponseSuccess",payload:o});case 14:i.next=6;break;case 16:i.next=23;break;case 18:return i.prev=18,i.t0=i.catch(5),console.error("saga.listenerConversationInfo:"+i.t0),Object($.b)(Ha(i.t0)),i.abrupt("return");case 23:case"end":return i.stop()}}),vn,null,[[5,18]])}function kn(e){var t,a;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=ye("company_id"),e.next=4,rn(t,"ENCUESTA");case 4:return a=e.sent,e.next=7,Object($.b)({type:"@chatbot/obtenerInfoConfEncuestaSuccess",payload:a});case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error("saga.obtenerInfoConfEncuesta",e.t0),e.t0;case 13:case"end":return e.stop()}}),hn,null,[[0,9]])}function An(e){var t,a,n,r,o,c;return X.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t=ye("idConversartion"),a=t.idConversartion,n=ye("company_id"),r=!!e.value&&e.value,o=11,i.next=7,rn(n,"LIMPIAR_MENSAJES_CLIENTEWEB");case 7:if(c=i.sent,!r){i.next=13;break}return i.next=11,Xa(n,a,o,r);case 11:return i.next=13,$a(n,a);case 13:return c&&Object(Pt.dropMessages)(),fe("clienteData"),fe("idConversartion"),i.next=18,Object($.b)({type:"@chatbot/enviarEncuestaSuccess",payload:{idConv:!1,esperandoNuevaConv:!0,convData:!1,flag:!0}});case 18:i.next=25;break;case 20:return i.prev=20,i.t0=i.catch(0),console.error("saga.enviarEncuesta",i.t0),Object($.b)(Va(i.t0)),i.abrupt("return");case 25:case"end":return i.stop()}}),yn,null,[[0,20]])}function In(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:({nombre:"asdf",mail:"asdf",motivo:"asdf"});case 1:case"end":return e.stop()}}),fn)}function Mn(e){var t,a,n,r,o,c,i,s,l,u,m,d,p,b,v,h,y;return X.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return console.log("start conev"),t=Object(V.a)({},e.value),a=ye("company_id"),f.next=5,rn(a,"CAPTCHA_ENABLED");case 5:return n=f.sent,f.next=8,rn(a,"CLIENT_FORM_ENABLED");case 8:if(f.sent,r=!1,!t.newMessage){f.next=14;break}return f.next=13,Object(Pt.addUserMessage)(t.newMessage);case 13:r=t.newMessage;case 14:return Object(Pt.addResponseMessage)("Iniciando conversaci\xf3n..."),c=Pa.isMobile?"Mobile":Pa.isDesktop?"Desktop":Pa.isTablet?"Tablet":"No reconocido",i=Pa.isChrome?"Chrome":Pa.isEdge?"Edge":Pa.isFirefox?"Firefox":Pa.isOpera?"Opera":"Sin identificar",f.next=19,rn(a,"MULTIPLES_HIJOS");case 19:return s=f.sent,l=!1,s&&(l="hijo1"),u=window.location.href,m=n?e.value.captcha?e.value.captcha:"No validado":"No aplica",-1!==Object.keys(t).indexOf("nombre")?o={param_Hijo:l,company:a,nombre:t.nombre,mail:t.mail,motivo:t.subject,device:"dispositivo: "+c+", navegador: "+i,sitio:u}:(d=r||(e.value.subject?e.value.subject:e.value),o={param_Hijo:l,company:a,nombre:"anonimo",mail:"anonimo@anonimo.com",motivo:d,device:"dispositivo: "+c+", navegador: "+i,captchaValidado:m,sitio:u},t={nombre:"anonimo",mail:"anonimo@anonimo.com",subject:d}),console.log(o,"=========="),p=!1,"https://us-central1-chat-asesores-prueba.cloudfunctions.net/nuevaConversacionWeb",f.next=30,Object($.a)(fetch,"https://us-central1-chat-asesores-prueba.cloudfunctions.net/nuevaConversacionWeb",{method:"POST",headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET, POST, PUT, DELETE, OPTIONS","Access-Control-Allow-Credentials":"true","Access-Control-Request-Headers":"access-control-allow-credentials,access-control-allow-headers,access-control-allow-methods,access-control-allow-origin,auth,authorization,cache-control,content-type,mode",accept:"application/json, text/plain, */*","Content-Type":"application/json","Cache-Control":"no-cache","cache-control":"no-cache"},body:JSON.stringify(o)});case 30:if(!((b=f.sent).status>=200&&b.status<300)){f.next=38;break}return f.next=34,Object($.a)([b,b.json]);case 34:v=f.sent,p=v.conv,f.next=42;break;case 38:return f.next=40,Object($.a)([b,b.json]);case 40:h=f.sent,console.error("errorResponse",h);case 42:if(!p){f.next=57;break}return he("idConversartion",JSON.stringify({idConversartion:p})),he("clienteData",JSON.stringify(t)),f.prev=45,f.next=48,Object($.b)(Ua());case 48:return f.next=50,Object($.b)(qa({conversationId:p}));case 50:(y=ye("consultaWriter"))&&y.eject&&y.firstMessage&&he("consultaWriter",JSON.stringify({eject:y.eject,value:y.value,firstMessage:!1})),f.next=57;break;case 54:f.prev=54,f.t0=f.catch(45),console.error(f.t0);case 57:case"end":return f.stop()}}),gn,null,[[45,54]])}function Ln(e){var t,a,n,r,o,c,i,s,l,u,m,d,p,b,v,h;return X.a.wrap((function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,console.log("start widget",e.value.company),a=!1,(null===(t=e.value)||void 0===t?void 0:t.hijo)&&(a=e.value.hijo),n=e.value.company,y.next=7,Ba(n);case 7:return r=y.sent,y.next=10,cn(r.id);case 10:return o=y.sent,y.next=13,rn(r.id,"BOT_ENABLED");case 13:return c=y.sent,y.next=16,rn(r.id,"TYPE_WRITER_WIDGET_WEB");case 16:return i=y.sent,(s=ye("consultaWriter"))&&s.eject?he("consultaWriter",JSON.stringify({eject:!0,value:i,firstMessage:s.firstMessage})):he("consultaWriter",JSON.stringify({eject:!0,value:i,firstMessage:!0})),y.next=21,Object($.b)(_a(i));case 21:return c&&(o.valido=!0),l=!1,he("company_id",JSON.stringify(r.id)),he("param_Hijo",JSON.stringify(a)),y.next=27,rn(r.id,"CLIENT_FORM_ENABLED");case 27:return u=y.sent,y.next=30,rn(r.id,"CAPTCHA_ENABLED");case 30:return m=y.sent,y.next=33,rn(r.id,"INICIAR_CHAT_ABIERTO");case 33:if(d=y.sent,he("clientFormEnabled",JSON.stringify(u)),!u){y.next=41;break}return y.next=38,rn(r.id,"CLIENT_FORM");case 38:l=y.sent,y.next=48;break;case 41:return y.next=43,on(r.id,"MENSAJE_BIENVENIDA_CLIENTE_WEB");case 43:p=y.sent,b=p.value,v=p.tipo,he("tipoMensajeBienvenida",JSON.stringify(v)),b&&("texto"===v?Object(Pt.addResponseMessage)(b):"quick_reply"===v&&b.forEach((function(e){Sn(JSON.parse(e),i)})));case 48:return y.next=50,rn(r.id,"ENCUESTA");case 50:return h=y.sent,y.next=53,Object($.b)(Ga({company:r.data(),horario:o,company_id:r.id,formularioInicial:l,encuestaConf:h,isEnabledClientForm:u,botEnabled:c,isEnabledCaptchaValidation:m,chatOpened:d}));case 53:y.next=59;break;case 55:y.prev=55,y.t0=y.catch(0),console.error("saga.cliente.startWidget",y.t0),Za({error:y.t0});case 59:case"end":return y.stop()}}),En,null,[[0,55]])}function Dn(e){var t,a,n,r,o,c,i,s,l;return X.a.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=ye("company_id"),a=ye("idConversartion"),n=a.idConversartion,r=new Date,o=r.getTime(),c=e.value,!!e.value.isVoiceRecord,Object(Pt.addResponseMessage)("Adjuntando archivo..."),i=!1,u.next=10,re.collection("company").doc(t).collection("conversations").doc(n).get().then((function(e){i=e.data()}));case 10:return s=!1,u.next=13,ce.signInAnonymously();case 13:return u.next=15,Rn(t,n,c,o);case 15:return s=u.sent,l={value:{newMessage:s[0].url,conversationData:{agente:{nombres:i.agente.nombres}},client:!0,fileMessage:{caption:s[0].nombre,title:s[0].nombre,filename:s[0].nombre,url:s[0].url,type:s[0].tipo}}},u.next=19,Nn(l);case 19:return u.next=21,Object($.b)(Ja({play:!0}));case 21:case"end":return u.stop()}}),Cn)}function Rn(e,t,a,n){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(Ea.a)(X.a.mark((function e(t,a,n,r){var o,c,i,s;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],c=Object(ga.a)(n),e.prev=2,s=X.a.mark((function e(){var n,c,s,l,u,m,d,p;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.value,c=n.name?n.name:"".concat(r,"_","voiceRecording.wav"),s="".concat(t,"/conversations/").concat(a,"/").concat(c),l=ie.ref(s),u=n.blob?n.blob.type:n.type,m=u.split(["/"])[0],d=(d={application:"file",image:"image",audio:"audio",video:"video"}[m])||"file",p=n.blob?n.blob:n,e.next=12,l.put(p).then(function(){var e=Object(Ea.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=o,e.t1=a,e.t2=d,e.t3=c,e.next=6,l.getDownloadURL();case 6:e.t4=e.sent,e.t5={idConversation:e.t1,tipo:e.t2,nombre:e.t3,url:e.t4},e.t0.push.call(e.t0,e.t5);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 12:e.sent;case 13:case"end":return e.stop()}}),e)})),c.s();case 5:if((i=c.n()).done){e.next=9;break}return e.delegateYield(s(),"t0",7);case 7:e.next=5;break;case 9:e.next=14;break;case 11:e.prev=11,e.t1=e.catch(2),c.e(e.t1);case 14:return e.prev=14,c.f(),e.finish(14);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,null,[[2,11,14,17]])})))).apply(this,arguments)}function Tn(){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.f)(Ot,Nn);case 2:return e.next=4,Object($.e)(kt,xn);case 4:return e.next=6,Object($.f)(kt,On);case 6:return e.next=8,Object($.f)("@chatbot/TEXTResponse",In);case 8:return e.next=10,Object($.f)(At,Mn);case 10:return e.next=12,Object($.f)(It,An);case 12:return e.next=14,Object($.f)("@chatbot/startWidget",Ln);case 14:return e.next=16,Object($.f)(Mt,kn);case 16:return e.next=18,Object($.f)("@chatbot/handleFileMessage",Dn);case 18:return e.next=20,Object($.f)("@chatbot/consultaTypeWriterWeb",jn);case 20:case"end":return e.stop()}}),wn)}var Wn=Object(K.a)(),Pn=Object(J.combineReducers)({localReducer:fa,form:de.a}),zn=Object(J.createStore)(Pn,Object(Q.composeWithDevTools)(Object(J.applyMiddleware)(Wn)));Wn.run(Tn);var Bn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props.containerData;return r.a.createElement(ve,null,r.a.createElement(d.a,{store:zn},r.a.createElement(m.a,{className:"main-wrapper auth chatbot-avanti-".concat(e.company)},r.a.createElement(ha,{containerData:e}))))}}]),a}(n.Component),qn="users/",_n="https://reqres.in/api/",Un=[{path:"/home",component:je},{path:"/",component:Bn}],Hn=[{path:"/home",name:"Home",css:j.f,key:1,label:"Home"},{path:"/auth",name:"User",css:j.k,key:2,label:"Usuarios"}],Vn=Bn,Zn=(a(612),[{position:"right",path:"/",name:"Asimov",css:j.a,key:4,label:"Asimov",className:"logo",active:!1}]),Gn=(a(255),a(160)),Jn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a=e.props.onItemClick;return!!a&&a(t)},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this,t=this.props.items;return t&&t.map((function(t,n){var o="styled-nav-item ".concat(t.className?t.className:""," ").concat(t.active?"active":""),c=t.dropdown;return r.a.createElement(Gn.a.Item,{as:"li",key:t.key,className:o},t.onItemClick?r.a.createElement(Gn.a.Link,{href:"#",className:"sidebar-nav-link action",onClick:e.onLogout},t.position&&"left"!==t.position?"":r.a.createElement(N.a,{className:"nav-icon",icon:t.css}),r.a.createElement("span",{className:"link-text"},t.label),"right"===t.position?r.a.createElement(N.a,{className:"nav-icon",icon:t.css}):""):r.a.createElement(P.a,{to:t.path,className:"sidebar-nav-link "},t.position&&"left"!==t.position?"":t.picture?r.a.createElement(Oe.a,{className:"nav-image",src:t.picture,roundedCircle:!0}):r.a.createElement(N.a,{className:"nav-icon",icon:t.css}),r.a.createElement("span",{className:"link-text"},t.label),t.position&&"right"===t.position?t.picture?r.a.createElement(Oe.a,{className:"nav-image",src:t.picture,roundedCircle:!0}):r.a.createElement(N.a,{className:"nav-icon",icon:t.css}):""),c?r.a.createElement("div",{className:"submenu"},r.a.createElement(Gn.a.Item,{as:"ul"},r.a.createElement(a,{items:c}))):"")}))}}]),a}(n.Component),Qn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).onItemClick=function(e){n.setState({activePath:e})},n.onLogoutClick=function(){sessionStorage.clear(),ce.signOut(),n.setState({activePath:"/"})};var r=n.props,o=r.items,c=r.onLogout;return n.state={activePath:"/",items:o,onLogout:c},n}return Object(s.a)(a,[{key:"render",value:function(){var e,t=this,a=this.state,n=a.items;a.onLogout;return r.a.createElement("div",{className:"side-nav-wrapper"},r.a.createElement(Gn.a,{className:"side-nav-nar",activeKey:"1",onSelect:this.onItemClick,as:"ul"},r.a.createElement(Jn,{items:Zn}),r.a.createElement(Jn,{items:n,onItemClick:function(){return t.onItemClick}}),r.a.createElement(Jn,{items:[{position:"left",path:"/",name:"Exit",css:j.g,key:5,label:"Exit",className:"logout",active:!1,onItemClick:e}],onItemClick:function(){return t.onLogoutClick()}})))}}]),a}(n.Component),Kn=(n.Component,function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.items,e.menuItems,e.main,e.nomatch,e.containerData);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Bn,{containerData:t}))}}]),a}(n.Component)),Yn=document.getElementById("chatbot-avanti");console.log("domElement",Yn),c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Kn,{items:Un,main:Vn,menuItems:Hn,containerData:Yn.dataset})),document.getElementById("chatbot-avanti")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[418,1,2]]]);
//# sourceMappingURL=main.bd69a827.chunk.js.map